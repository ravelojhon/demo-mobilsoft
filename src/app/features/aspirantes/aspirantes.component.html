<h2>Gesti√≥n de Aspirantes</h2>
<button (click)="createAspirante()">Crear Aspirante</button>

<p-dialog [modal]="true" [(visible)]="showForm" [style]="{ width: '45vw', height:'60vh' }">

    <form [formGroup]="aspiranteForm" (ngSubmit)="onSubmit()">
        <div class="header_modal">
            <h1>{{formTitle}}</h1>
        </div>

        <div class="content_modal">
            <div class="row">
                <div class="col-3">
                    <label for="Nombres" style="display: block;">Nombres:</label>
                    <input type="text" id="Nombres" formControlName="Nombres">

                    <div
                        *ngIf="aspiranteForm.get('Nombres')?.invalid && (aspiranteForm.get('Nombres')?.dirty || aspiranteForm.get('Nombres')?.touched)">
                        <div *ngIf="aspiranteForm.get('Nombres')?.errors?.['required']">Nombre es obligatorio.</div>
                    </div>
                </div>
                <div class="col-3">
                    <label for="Apellidos" style="display: block;">Apellidos:</label>
                    <input type="text" id="Apellidos" formControlName="Apellidos" required>
                    <div
                        *ngIf="aspiranteForm.get('Apellidos')?.invalid && (aspiranteForm.get('Apellidos')?.dirty || aspiranteForm.get('Apellidos')?.touched)">
                        <div *ngIf="aspiranteForm.get('Apellidos')?.errors?.['required']">Apellidos es obligatorio.
                        </div>
                    </div>
                </div>

                <div class="col-3">
                    <label for="TipoDocumento" style="display: block;">Tipo Documento:</label>

                    <p-select formControlName="TipoDocumento" [options]="typeDocuments" optionLabel="codigo"
                        placeholder="Seleccione..." [filter]="true" filterBy="codigo" appendTo="body" />
                    <div
                        *ngIf="aspiranteForm.get('TipoDocumento')?.invalid && (aspiranteForm.get('TipoDocumento')?.dirty || aspiranteForm.get('TipoDocumento')?.touched)">
                        <div *ngIf="aspiranteForm.get('TipoDocumento')?.errors?.['required']">Tipo Documento es
                            obligatorio.</div>
                    </div>
                </div>

                <div class="col-3">
                    <label for="NumeroDocumento" style="display: block;">Numero Documento:</label>
                    <input type="text" id="NumeroDocumento" formControlName="NumeroDocumento" required>
                    <div
                        *ngIf="aspiranteForm.get('NumeroDocumento')?.invalid && (aspiranteForm.get('NumeroDocumento')?.dirty || aspiranteForm.get('NumeroDocumento')?.touched)">
                        <div *ngIf="aspiranteForm.get('NumeroDocumento')?.errors?.['required']">Numero Documento es
                            obligatorio.</div>
                    </div>
                </div>
            </div>

            <div class="row" style="margin-top: 12px;">

                <div class="col-3">
                    <label for="FechaNacimiento">Fecha Nacimiento:</label>
                    <input type="date" id="FechaNacimiento" formControlName="FechaNacimiento" required>
                    <div
                        *ngIf="aspiranteForm.get('FechaNacimiento')?.invalid && (aspiranteForm.get('FechaNacimiento')?.dirty || aspiranteForm.get('FechaNacimiento')?.touched)">
                        <div *ngIf="aspiranteForm.get('FechaNacimiento')?.errors?.['required']">Fecha Nacimiento es
                            obligatorio.</div>
                    </div>
                </div>

                <div class="col-3">
                    <label for="Sexo">Sexo:</label>
                    <p-select formControlName="Sexo" [options]="sexo" optionLabel="label" placeholder="Seleccione..."
                        [filter]="true" filterBy="label" appendTo="body" />
                    <div
                        *ngIf="aspiranteForm.get('Sexo')?.invalid && (aspiranteForm.get('Sexo')?.dirty || aspiranteForm.get('Sexo')?.touched)">
                        <div *ngIf="aspiranteForm.get('Sexo')?.errors?.['required']">Sexo es obligatorio.</div>
                    </div>
                </div>

                <div class="col-3">
                    <label for="EstadoCivil">Estado Civil:</label>
                    <p-select formControlName="EstadoCivil" [options]="estadoCivil" optionLabel="label"
                        placeholder="Seleccione..." [filter]="true" filterBy="label" appendTo="body" />
                </div>

                <div class="col-3">
                    <label for="GrupoSanguineo">Grupo Sanguineo:</label>
                    <p-select formControlName="GrupoSanguineo" [options]="grupoSanguinieo" optionLabel="label"
                        placeholder="Seleccione..." [filter]="true" filterBy="label" appendTo="body" />
                </div>

            </div>

            <div class="row" style="margin-top: 12px;">
                <div class="col-3">
                    <label for="Direccion">Direccion:</label>
                    <input type="text" id="Direccion" formControlName="Direccion" required>
                    <div
                        *ngIf="aspiranteForm.get('Direccion')?.invalid && (aspiranteForm.get('Direccion')?.dirty || aspiranteForm.get('Direccion')?.touched)">
                        <div *ngIf="aspiranteForm.get('Direccion')?.errors?.['required']">Direccion es obligatorio.
                        </div>
                    </div>
                </div>

                <div class="col-3">
                    <label for="Telefono">Telefono:</label>
                    <input type="text" id="Telefono" formControlName="Telefono">
                </div>

                <div class="col-3">
                    <label for="CorreoElectronico">Correo Electronico:</label>
                    <input type="email" id="CorreoElectronico" formControlName="CorreoElectronico">
                </div>

                <div class="col-3">
                    <label for="NivelEducativo">Nivel Educativo:</label>
                    <p-select id="NivelEducativo" formControlName="NivelEducativo" [options]="NivelEducativo" optionLabel="label"
                        placeholder="Seleccione..." [filter]="true" filterBy="label" appendTo="body" />
                </div>

            </div>

            <div class="row" style="margin-top: 12px;">
                <div class="col-3">
                    <label for="CargoAspirado">Cargo al que aspira:</label>
                    <input type="text" id="CargoAspirado" formControlName="CargoAspirado">
                </div>

                <div class="col-3">
                    <label for="Documentos">Documentos:</label>
                    <input type="text" id="Documentos" formControlName="Documentos">
                </div>
    
                <div class="col-3">
                    <label for="EmpresaId">Empresa:</label>
                    <input type="text" id="EmpresaId" formControlName="EmpresaId" placeholder="Si aplica, ingrese el id de la empresa">
                </div>
            </div>

            <div style="display: flex; justify-content: end; margin: 12px;">
                <button style="margin-right: 10px;" type="submit" class="btn btn-primary guardar me-2" [disabled]="aspiranteForm.invalid">
                  <i class="bi bi-check"></i> Guardar
                </button>
                <button class="btn btn-danger cerrar" (click)="showDialog(false)" type="button">
                  Cancelar
                </button>
              </div>
        </div>

      

        <!-- 
    <button type="submit" [disabled]="aspiranteForm.invalid">Guardar</button>
     <button type="button" (click)="showForm = false">Cancelar</button> -->
    </form>
</p-dialog>


<table>
    <thead>
        <tr>
            <th>Nombres</th>
            <th>Apellidos</th>
            <th>Tipo Documento</th>
            <th>Numero Documento</th>
            <th>Fecha Nacimiento</th>
            <th>Sexo</th>
            <th>Estado Civil</th>
            <th>Grupo Sanguineo</th>
            <th>Direccion</th>
            <th>Telefono</th>
            <th>Correo Electronico</th>
            <th>Nivel Educativo</th>
            <th>Cargo Aspirado</th>
            <th>Documentos</th>
            <th>Empresa Id</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let aspirante of aspirantes">
            <td>{{ aspirante.Nombres }}</td>
            <td>{{ aspirante.Apellidos }}</td>
            <td>{{ aspirante.TipoDocumento }}</td>
            <td>{{ aspirante.NumeroDocumento }}</td>
            <td>{{ aspirante.FechaNacimiento}}</td>
            <td>{{ aspirante.Sexo }}</td>
            <td>{{ aspirante.EstadoCivil }}</td>
            <td>{{ aspirante.GrupoSanguineo }}</td>
            <td>{{ aspirante.Direccion }}</td>
            <td>{{ aspirante.Telefono }}</td>
            <td>{{ aspirante.CorreoElectronico }}</td>
            <td>{{ aspirante.NivelEducativo }}</td>
            <td>{{ aspirante.CargoAspirado }}</td>
            <td>{{ aspirante.Documentos }}</td>
            <td>{{ aspirante.EmpresaId }}</td>
            <td>
                <button (click)="editAspirante(aspirante)">Editar</button>
                <button (click)="deleteAspirante(aspirante.AspiranteEmpleadoId)">Eliminar</button>
            </td>
        </tr>
    </tbody>
</table>